
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dispel.providers.generic.tasks.pinch.steps &#8212; dispel 0.1.dev1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../../_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../../../../../../_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../../../../../../_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="../../../../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=a746c00c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="../../../../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script src="../../../../../../_static/documentation_options.js?v=6aee1ebc"></script>
    <script src="../../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="https://unpkg.com/mermaid@10.2.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/dispel/providers/generic/tasks/pinch/steps';</script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../../../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../../../_static/dispel-logo.png" class="logo__image only-light" alt="dispel 0.1.dev1 documentation - Home"/>
    <script>document.write(`<img src="../../../../../../_static/dispel-logo.png" class="logo__image only-dark" alt="dispel 0.1.dev1 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../usage.html">
                        Usage
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../measures.html">
                        Measures
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../api/modules.html">
                        dispel
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../contributing.html">
                        Contributing
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../usage.html">
                        Usage
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../measures.html">
                        Measures
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../api/modules.html">
                        dispel
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../../../contributing.html">
                        Contributing
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../../../../index.html" class="nav-link">Module code</a></li>
    
    
    <li class="breadcrumb-item"><a href="../../../../providers.html" class="nav-link">dispel.providers</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">dispel.provi...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <h1>Source code for dispel.providers.generic.tasks.pinch.steps</h1><div class="highlight"><pre>
<span></span><span class="c1"># pylint: disable=duplicate-code</span>
<span class="c1"># pylint: disable=too-many-lines</span>
<span class="sd">&quot;&quot;&quot;Pinch test related functionality.</span>

<span class="sd">This module contains functionality to extract measures for the *Pinch* test</span>
<span class="sd">(PINCH).</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Any</span><span class="p">,</span>
    <span class="n">Callable</span><span class="p">,</span>
    <span class="n">Dict</span><span class="p">,</span>
    <span class="n">Generator</span><span class="p">,</span>
    <span class="n">Iterable</span><span class="p">,</span>
    <span class="n">List</span><span class="p">,</span>
    <span class="n">Sequence</span><span class="p">,</span>
    <span class="n">Tuple</span><span class="p">,</span>
    <span class="n">Union</span><span class="p">,</span>
    <span class="n">cast</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy.signal</span> <span class="kn">import</span> <span class="n">find_peaks</span>

<span class="kn">from</span> <span class="nn">dispel.data.core</span> <span class="kn">import</span> <span class="n">Reading</span>
<span class="kn">from</span> <span class="nn">dispel.data.flags</span> <span class="kn">import</span> <span class="n">Flag</span>
<span class="kn">from</span> <span class="nn">dispel.data.levels</span> <span class="kn">import</span> <span class="n">Level</span>
<span class="kn">from</span> <span class="nn">dispel.data.measures</span> <span class="kn">import</span> <span class="n">MeasureValueDefinitionPrototype</span>
<span class="kn">from</span> <span class="nn">dispel.data.raw</span> <span class="kn">import</span> <span class="n">DEFAULT_COLUMNS</span><span class="p">,</span> <span class="n">USER_ACC_MAP</span><span class="p">,</span> <span class="n">RawDataValueDefinition</span>
<span class="kn">from</span> <span class="nn">dispel.data.validators</span> <span class="kn">import</span> <span class="n">GREATER_THAN_ZERO</span><span class="p">,</span> <span class="n">RangeValidator</span>
<span class="kn">from</span> <span class="nn">dispel.data.values</span> <span class="kn">import</span> <span class="n">AbbreviatedValue</span> <span class="k">as</span> <span class="n">AV</span>
<span class="kn">from</span> <span class="nn">dispel.data.values</span> <span class="kn">import</span> <span class="n">ValueDefinition</span>
<span class="kn">from</span> <span class="nn">dispel.processing</span> <span class="kn">import</span> <span class="n">ProcessingStep</span>
<span class="kn">from</span> <span class="nn">dispel.processing.data_set</span> <span class="kn">import</span> <span class="n">transformation</span>
<span class="kn">from</span> <span class="nn">dispel.processing.extract</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BASIC_AGGREGATIONS</span><span class="p">,</span>
    <span class="n">DEFAULT_AGGREGATIONS_CV</span><span class="p">,</span>
    <span class="n">DEFAULT_AGGREGATIONS_Q95_CV</span><span class="p">,</span>
    <span class="n">AggregateModalities</span><span class="p">,</span>
    <span class="n">AggregateRawDataSetColumn</span><span class="p">,</span>
    <span class="n">ExtractStep</span><span class="p">,</span>
    <span class="n">agg_column</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">dispel.processing.level</span> <span class="kn">import</span> <span class="n">LevelFilter</span><span class="p">,</span> <span class="n">LevelIdFilter</span><span class="p">,</span> <span class="n">ProcessingStepGroup</span>
<span class="kn">from</span> <span class="nn">dispel.processing.level_filters</span> <span class="kn">import</span> <span class="n">AbsentDataSetFilter</span><span class="p">,</span> <span class="n">NotEmptyDatasetFilter</span>
<span class="kn">from</span> <span class="nn">dispel.processing.modalities</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">HandModality</span><span class="p">,</span>
    <span class="n">HandModalityFilter</span><span class="p">,</span>
    <span class="n">SensorModality</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">dispel.processing.transform</span> <span class="kn">import</span> <span class="n">ConcatenateLevels</span><span class="p">,</span> <span class="n">TransformStep</span>
<span class="kn">from</span> <span class="nn">dispel.processing.utils</span> <span class="kn">import</span> <span class="n">parallel_explode</span>
<span class="kn">from</span> <span class="nn">dispel.providers.generic.activity.orientation</span> <span class="kn">import</span> <span class="n">UpperLimbOrientationFlagger</span>
<span class="kn">from</span> <span class="nn">dispel.providers.generic.flags.ue_flags</span> <span class="kn">import</span> <span class="n">OnlyOneHandPerformed</span>
<span class="kn">from</span> <span class="nn">dispel.providers.generic.sensor</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">FREQ_20HZ</span><span class="p">,</span>
    <span class="n">RenameColumns</span><span class="p">,</span>
    <span class="n">Resample</span><span class="p">,</span>
    <span class="n">SetTimestampIndex</span><span class="p">,</span>
    <span class="n">TransformUserAcceleration</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">dispel.providers.generic.tasks.pinch.attempts</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">PinchAttempt</span><span class="p">,</span>
    <span class="n">PinchTarget</span><span class="p">,</span>
    <span class="n">PinchTouch</span><span class="p">,</span>
    <span class="n">double_touch_asynchrony</span><span class="p">,</span>
    <span class="n">dwell_time</span><span class="p">,</span>
    <span class="n">number_successful_pinches</span><span class="p">,</span>
    <span class="n">pinching_duration</span><span class="p">,</span>
    <span class="n">success_duration</span><span class="p">,</span>
    <span class="n">total_duration</span><span class="p">,</span>
    <span class="n">total_number_pinches</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">dispel.providers.generic.tasks.pinch.modalities</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AttemptOutcomeModality</span><span class="p">,</span>
    <span class="n">AttemptSelectionModality</span><span class="p">,</span>
    <span class="n">BubbleSizeModality</span><span class="p">,</span>
    <span class="n">BubbleSizeModalityFilter</span><span class="p">,</span>
    <span class="n">FingerModality</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">dispel.providers.generic.touch</span> <span class="kn">import</span> <span class="n">Touch</span>
<span class="kn">from</span> <span class="nn">dispel.providers.generic.tremor</span> <span class="kn">import</span> <span class="n">TremorMeasures</span>
<span class="kn">from</span> <span class="nn">dispel.signal.filter</span> <span class="kn">import</span> <span class="n">butterworth_low_pass_filter</span>
<span class="kn">from</span> <span class="nn">dispel.stats.core</span> <span class="kn">import</span> <span class="n">percentile_95</span><span class="p">,</span> <span class="n">variation</span><span class="p">,</span> <span class="n">variation_increase</span>

<span class="n">TASK_NAME</span> <span class="o">=</span> <span class="n">AV</span><span class="p">(</span><span class="s2">&quot;Pinch test&quot;</span><span class="p">,</span> <span class="s2">&quot;PINCH&quot;</span><span class="p">)</span>

<span class="c1">#: A validator that ensures values are comprise between zero and forty seconds</span>
<span class="n">ATTEMPT_DURATION_VALIDATOR</span> <span class="o">=</span> <span class="n">RangeValidator</span><span class="p">(</span><span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1">#: A validator that ensures values are comprise between zero and forty seconds</span>
<span class="c1">#: in milliseconds</span>
<span class="n">ATTEMPT_DURATION_VALIDATOR_MS</span> <span class="o">=</span> <span class="n">RangeValidator</span><span class="p">(</span><span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mf">4e4</span><span class="p">)</span>

<span class="n">_LEVELS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hand</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">size</span><span class="o">.</span><span class="n">variable</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
    <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span>
<span class="p">]</span>

<span class="n">PINCH_BASIC_MODALITY_AGGREGATIONS</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
    <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">float</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span>
<span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">BASIC_AGGREGATIONS</span><span class="p">,</span> <span class="p">(</span><span class="n">variation</span><span class="p">,</span> <span class="s2">&quot;coefficient of variation&quot;</span><span class="p">)]</span>

<span class="n">PINCH_EXTENDED_MODALITY_AGGREGATIONS</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
    <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">float</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span>
<span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">PINCH_BASIC_MODALITY_AGGREGATIONS</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">)]</span>


<div class="viewcode-block" id="BubbleSizeTransformMixin">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.BubbleSizeTransformMixin">[docs]</a>
<span class="k">class</span> <span class="nc">BubbleSizeTransformMixin</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for Bubble.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    size</span>
<span class="sd">        Bubble size modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="BubbleSizeTransformMixin.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.BubbleSizeTransformMixin.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore</span></div>


<div class="viewcode-block" id="BubbleSizeTransformMixin.get_definition">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.BubbleSizeTransformMixin.get_definition">[docs]</a>
    <span class="k">def</span> <span class="nf">get_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the definition.&quot;&quot;&quot;</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">av</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_definition</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore</span></div>


<div class="viewcode-block" id="BubbleSizeTransformMixin.get_level_filter">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.BubbleSizeTransformMixin.get_level_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LevelFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the level filter based on the bubble size.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">LevelIdFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span>
            <span class="o">&amp;</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_level_filter</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="HandModalityFilterMixin">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.HandModalityFilterMixin">[docs]</a>
<span class="k">class</span> <span class="nc">HandModalityFilterMixin</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for Bubble.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="HandModalityFilterMixin.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.HandModalityFilterMixin.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;hand&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore</span></div>


<div class="viewcode-block" id="HandModalityFilterMixin.get_definition">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.HandModalityFilterMixin.get_definition">[docs]</a>
    <span class="k">def</span> <span class="nf">get_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the definition.&quot;&quot;&quot;</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hand&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_definition</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore</span></div>


<div class="viewcode-block" id="HandModalityFilterMixin.get_level_filter">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.HandModalityFilterMixin.get_level_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LevelFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get level filter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">HandModalityFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_level_filter</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchConcatenateTargets">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateTargets">[docs]</a>
<span class="k">class</span> <span class="nc">PinchConcatenateTargets</span><span class="p">(</span><span class="n">TransformStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A pinch target level concatenation step.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;screen&quot;</span>

    <span class="n">new_data_set_id</span> <span class="o">=</span> <span class="s2">&quot;melted_targets&quot;</span>

    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;targets&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Concatenated pinch level data&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Array of PinchTarget objects for level </span><span class="si">{level_id}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_segment_pinches</span><span class="p">(</span><span class="n">levels</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Level</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">PinchTarget</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Segment data from multiple pinch level data.&quot;&quot;&quot;</span>
        <span class="n">targets</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">PinchTarget</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">has_raw_data_set</span><span class="p">(</span><span class="s2">&quot;screen&quot;</span><span class="p">),</span> <span class="n">levels</span><span class="p">):</span>
            <span class="n">target</span> <span class="o">=</span> <span class="n">PinchTarget</span><span class="o">.</span><span class="n">from_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">target</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">targets</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">parent_id</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">targets</span>

    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">_segment_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">Level</span><span class="p">,</span> <span class="n">reading</span><span class="p">:</span> <span class="n">Reading</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="n">pinches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_segment_pinches</span><span class="p">(</span><span class="n">reading</span><span class="o">.</span><span class="n">levels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;targets&quot;</span><span class="p">:</span> <span class="n">pinches</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">level</span><span class="o">.</span><span class="n">id</span><span class="p">)]})</span></div>



<div class="viewcode-block" id="PinchConcatenateHands">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateHands">[docs]</a>
<span class="k">class</span> <span class="nc">PinchConcatenateHands</span><span class="p">(</span><span class="n">HandModalityFilterMixin</span><span class="p">,</span> <span class="n">ConcatenateLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A pinch hand level concatenation step.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        The hand to which the levels are to be concatenated.</span>
<span class="sd">    data_set_id</span>
<span class="sd">        The data set id(s) that will be merged.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchConcatenateHands.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateHands.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span> <span class="n">data_set_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span> <span class="n">new_level_id</span><span class="o">=</span><span class="n">hand</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span> <span class="n">data_set_id</span><span class="o">=</span><span class="n">data_set_id</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchConcatenateBubbles">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateBubbles">[docs]</a>
<span class="k">class</span> <span class="nc">PinchConcatenateBubbles</span><span class="p">(</span><span class="n">ConcatenateLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A pinch bubble size level concatenation step for target data sets.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    size</span>
<span class="sd">        The hand to which the levels are to be concatenated.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchConcatenateBubbles.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateBubbles.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span><span class="p">):</span>
        <span class="n">level_filter</span> <span class="o">=</span> <span class="n">AbsentDataSetFilter</span><span class="p">(</span><span class="s2">&quot;melted_targets&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">BubbleSizeModalityFilter</span><span class="p">(</span>
            <span class="n">size</span>
        <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">new_level_id</span><span class="o">=</span><span class="n">size</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span>
            <span class="n">data_set_id</span><span class="o">=</span><span class="s2">&quot;melted_targets&quot;</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">level_filter</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchConcatenateTargetsLevels">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateTargetsLevels">[docs]</a>
<span class="k">class</span> <span class="nc">PinchConcatenateTargetsLevels</span><span class="p">(</span><span class="n">ConcatenateLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A level concatenation step.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchConcatenateTargetsLevels.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateTargetsLevels.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">new_level_id</span><span class="o">=</span><span class="s2">&quot;melted_levels&quot;</span><span class="p">,</span>
            <span class="n">data_set_id</span><span class="o">=</span><span class="s2">&quot;melted_targets&quot;</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">AbsentDataSetFilter</span><span class="p">(</span><span class="s2">&quot;melted_targets&quot;</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformMeltedLevels">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformMeltedLevels">[docs]</a>
<span class="k">class</span> <span class="nc">TransformMeltedLevels</span><span class="p">(</span><span class="n">TransformStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformation step based on melted levels.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;melted_targets&quot;</span></div>



<div class="viewcode-block" id="TransformApplyMeltedLevels">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeltedLevels">[docs]</a>
<span class="k">class</span> <span class="nc">TransformApplyMeltedLevels</span><span class="p">(</span><span class="n">TransformMeltedLevels</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Transformation step that applies a function on targets.&quot;&quot;&quot;</span>

    <span class="n">apply</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="n">target_dtype</span> <span class="o">=</span> <span class="s2">&quot;float64&quot;</span>

<div class="viewcode-block" id="TransformApplyMeltedLevels.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeltedLevels.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the function to be applied to the data set.&quot;&quot;&quot;</span>
        <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span>
        <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s2">&quot;__func__&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">func</span><span class="o">.</span><span class="vm">__func__</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">func</span></div>


<div class="viewcode-block" id="TransformApplyMeltedLevels.post_process_apply">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeltedLevels.post_process_apply">[docs]</a>
    <span class="k">def</span> <span class="nf">post_process_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Post process the data returned from the applied function.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">data</span></div>


    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_process_apply</span><span class="p">(</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_apply_function</span><span class="p">())</span>
        <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_dtype</span><span class="p">)</span></div>



<div class="viewcode-block" id="reaction_time_extended">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.reaction_time_extended">[docs]</a>
<span class="k">def</span> <span class="nf">reaction_time_extended</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">PinchTarget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract reaction time, hand, size and appearance of a target.</span>

<span class="sd">    The reaction time of the user between the bubble appearance and the first</span>
<span class="sd">    touch event.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    target</span>
<span class="sd">        A pinch target object.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Tuple</span>
<span class="sd">        The user reaction time in ms, the hand, the size, and the appearance</span>
<span class="sd">        timestamp.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">target</span><span class="o">.</span><span class="n">reaction_time</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e3</span><span class="p">,</span>
        <span class="n">target</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="n">target</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="n">target</span><span class="o">.</span><span class="n">appearance</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="compute_reaction_time">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.compute_reaction_time">[docs]</a>
<span class="k">def</span> <span class="nf">compute_reaction_time</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">reading</span><span class="p">:</span> <span class="n">Reading</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute the reaction time for each target extended with hand and size.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data</span>
<span class="sd">        The series of targets.</span>
<span class="sd">    reading</span>
<span class="sd">        The associated reading</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.Series</span>
<span class="sd">        A Series of the reaction time, for each targets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># find the timestamp when the first bubble appeared for left hand</span>
    <span class="k">if</span> <span class="s2">&quot;left&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">reading</span><span class="o">.</span><span class="n">level_ids</span><span class="p">):</span>
        <span class="n">ts_min_left</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ts_min_left</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">reading</span><span class="o">.</span><span class="n">get_level</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">get_raw_data_set</span><span class="p">(</span><span class="s2">&quot;melted_targets&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]</span>
            <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">appearance</span><span class="p">)</span>
            <span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="c1"># find the timestamp when the first bubble appeared for right hand</span>
    <span class="k">if</span> <span class="s2">&quot;right&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">reading</span><span class="o">.</span><span class="n">level_ids</span><span class="p">):</span>
        <span class="n">ts_min_right</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ts_min_right</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">reading</span><span class="o">.</span><span class="n">get_level</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">get_raw_data_set</span><span class="p">(</span><span class="s2">&quot;melted_targets&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]</span>
            <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">appearance</span><span class="p">)</span>
            <span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="c1"># Create a dataframe with targets, hand, size, appearance</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;targets&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]})</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;reaction_time&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hand&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;appearance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="o">*</span><span class="n">df</span><span class="o">.</span><span class="n">targets</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">reaction_time_extended</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Create a mask to remove the first reaction_time of each hand</span>
    <span class="n">l_mask</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">appearance</span> <span class="o">==</span> <span class="n">ts_min_left</span>
    <span class="n">r_mask</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">appearance</span> <span class="o">==</span> <span class="n">ts_min_right</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="n">l_mask</span> <span class="o">|</span> <span class="n">r_mask</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;reaction_time&quot;</span><span class="p">]</span></div>



<div class="viewcode-block" id="TransformReactionTime">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformReactionTime">[docs]</a>
<span class="k">class</span> <span class="nc">TransformReactionTime</span><span class="p">(</span><span class="n">TransformMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation step to get user&#39;s reaction time.&quot;&quot;&quot;</span>

    <span class="n">new_data_set_id</span> <span class="o">=</span> <span class="s2">&quot;reaction-time&quot;</span>
    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;reaction_time&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Reaction time data&quot;</span><span class="p">,</span>
            <span class="s2">&quot;float64&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time spent between the appearance of the &quot;</span>
            <span class="s2">&quot;pinch target and actually touching the screen.&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">]</span>

<div class="viewcode-block" id="TransformReactionTime.compute_reaction_time">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformReactionTime.compute_reaction_time">[docs]</a>
    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">compute_reaction_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">reading</span><span class="p">:</span> <span class="n">Reading</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overwrite transformation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">compute_reaction_time</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">reading</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformTargetProperties">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformTargetProperties">[docs]</a>
<span class="k">class</span> <span class="nc">TransformTargetProperties</span><span class="p">(</span><span class="n">TransformApplyMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for target properties.&quot;&quot;&quot;</span>

    <span class="n">new_data_set_id</span> <span class="o">=</span> <span class="s2">&quot;target-properties&quot;</span>
    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;total_pinches&quot;</span><span class="p">,</span>
            <span class="s2">&quot;total pinches data&quot;</span><span class="p">,</span>
            <span class="s2">&quot;int32&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The total number of pinches, where a pinch &quot;</span>
            <span class="s2">&quot;attempt is any screen interaction with at least &quot;</span>
            <span class="s2">&quot;two fingers down.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;successful_pinches&quot;</span><span class="p">,</span>
            <span class="s2">&quot;successful pinches data&quot;</span><span class="p">,</span>
            <span class="s2">&quot;int32&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of successful pinches, where a &quot;</span>
            <span class="s2">&quot;successful pinch attempt is any screen &quot;</span>
            <span class="s2">&quot;interaction with at least two fingers down that&quot;</span>
            <span class="s2">&quot;eventually leads to the target bubble bursting.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>
    <span class="n">target_dtype</span> <span class="o">=</span> <span class="s2">&quot;int32&quot;</span>

<div class="viewcode-block" id="TransformTargetProperties.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformTargetProperties.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the number of total and successful pinch attempts.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;total_pinches&quot;</span><span class="p">:</span> <span class="n">total_number_pinches</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
                <span class="s2">&quot;successful_pinches&quot;</span><span class="p">:</span> <span class="n">number_successful_pinches</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformTotalDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformTotalDuration">[docs]</a>
<span class="k">class</span> <span class="nc">TransformTotalDuration</span><span class="p">(</span><span class="n">TransformApplyMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation step to get pinch total duration.&quot;&quot;&quot;</span>

    <span class="n">new_data_set_id</span> <span class="o">=</span> <span class="s2">&quot;total-duration&quot;</span>
    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;total_duration&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Total duration data&quot;</span><span class="p">,</span>
            <span class="s2">&quot;float64&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The total time spent during the pinching &quot;</span>
            <span class="s2">&quot;events of one pinch target.&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">]</span>
    <span class="n">apply</span> <span class="o">=</span> <span class="n">total_duration</span></div>



<div class="viewcode-block" id="TransformApplyMeasureMixin">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeasureMixin">[docs]</a>
<span class="k">class</span> <span class="nc">TransformApplyMeasureMixin</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for measures.&quot;&quot;&quot;</span>

    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">measure</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get data set id from measure name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">measure_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get data measure id from measure name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="TransformApplyMeasureMixin.get_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeasureMixin.get_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_id</span></div>


<div class="viewcode-block" id="TransformApplyMeasureMixin.get_column_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeasureMixin.get_column_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_id</span></div>


<div class="viewcode-block" id="TransformApplyMeasureMixin.get_column_name">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeasureMixin.get_column_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="si">}</span><span class="s2"> data&quot;</span></div>


<div class="viewcode-block" id="TransformApplyMeasureMixin.get_new_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeasureMixin.get_new_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_new_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get new data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_id</span></div>


<div class="viewcode-block" id="TransformApplyMeasureMixin.get_definitions">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformApplyMeasureMixin.get_definitions">[docs]</a>
    <span class="k">def</span> <span class="nf">get_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RawDataValueDefinition</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get definition.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">RawDataValueDefinition</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_column_id</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_column_name</span><span class="p">(),</span>
                <span class="s2">&quot;float64&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">]</span></div>
</div>



<div class="viewcode-block" id="TransformReactionTimeByBubbleSize">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformReactionTimeByBubbleSize">[docs]</a>
<span class="k">class</span> <span class="nc">TransformReactionTimeByBubbleSize</span><span class="p">(</span>
    <span class="n">BubbleSizeTransformMixin</span><span class="p">,</span> <span class="n">TransformApplyMeasureMixin</span><span class="p">,</span> <span class="n">TransformMeltedLevels</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A transformation step to get user&#39;s reaction time by bubble size.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;bubble reaction time&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The time spent between the appearance of the &quot;</span>
        <span class="s2">&quot;pinch target and actually touching the screen&quot;</span>
        <span class="s2">&quot; for bubble size </span><span class="si">{size}</span><span class="s2">.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformReactionTimeByBubbleSize.compute_reaction_time">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformReactionTimeByBubbleSize.compute_reaction_time">[docs]</a>
    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">compute_reaction_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">reading</span><span class="p">:</span> <span class="n">Reading</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overwrite transformation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">compute_reaction_time</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">reading</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels">[docs]</a>
<span class="k">class</span> <span class="nc">TransformParallelExplodeMeltedLevels</span><span class="p">(</span>
    <span class="n">TransformApplyMeasureMixin</span><span class="p">,</span> <span class="n">TransformApplyMeltedLevels</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Transformation step that applies function with a post process.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">finger</span><span class="p">:</span> <span class="n">FingerModality</span><span class="p">,</span>
        <span class="n">outcome</span><span class="p">:</span> <span class="n">AttemptOutcomeModality</span> <span class="o">=</span> <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger</span> <span class="o">=</span> <span class="n">finger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span></div>


<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels.get_new_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels.get_new_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_new_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get new data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels.get_column_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels.get_column_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels.get_column_name">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels.get_column_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="si">}</span><span class="s2"> data for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="si">}</span><span class="s2"> attempt&quot;</span></div>


<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels.get_property">[docs]</a>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">PinchTarget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the pinching attempts&#39; property.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">target</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
            <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_column_id</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="n">target</span><span class="p">)}</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="TransformParallelExplodeMeltedLevels.post_process_apply">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformParallelExplodeMeltedLevels.post_process_apply">[docs]</a>
    <span class="k">def</span> <span class="nf">post_process_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parallel explode passed data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">parallel_explode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_dtype</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parallel_explode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_dtype</span><span class="p">)</span><span class="o">.</span><span class="n">empty</span>
            <span class="k">else</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformContactDistance">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformContactDistance">[docs]</a>
<span class="k">class</span> <span class="nc">TransformContactDistance</span><span class="p">(</span><span class="n">TransformParallelExplodeMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for contact distance.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;contact distance&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The distance between the initial point of &quot;</span>
        <span class="s2">&quot;contact with the screen and the surface of &quot;</span>
        <span class="s2">&quot;the target bubble for the </span><span class="si">{finger}</span><span class="s2"> for &quot;</span>
        <span class="s2">&quot;</span><span class="si">{outcome}</span><span class="s2"> attempt.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformContactDistance.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformContactDistance.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">PinchTarget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from a target.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">target</span><span class="o">.</span><span class="n">contact_distances</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformFirstPushes">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformFirstPushes">[docs]</a>
<span class="k">class</span> <span class="nc">TransformFirstPushes</span><span class="p">(</span><span class="n">TransformParallelExplodeMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step first finger pushes.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;first push&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The value of the first push of &quot;</span>
        <span class="s2">&quot;pressure applied on the screen by the &quot;</span>
        <span class="s2">&quot;</span><span class="si">{finger}</span><span class="s2"> for </span><span class="si">{outcome}</span><span class="s2"> attempt.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformFirstPushes.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformFirstPushes.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">PinchTarget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from a target.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">target</span><span class="o">.</span><span class="n">first_pushes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformWrapExplodeMeltedLevels">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformWrapExplodeMeltedLevels">[docs]</a>
<span class="k">class</span> <span class="nc">TransformWrapExplodeMeltedLevels</span><span class="p">(</span><span class="n">TransformApplyMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Transformation step that applies a function on targets.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TransformWrapExplodeMeltedLevels.post_process_apply">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformWrapExplodeMeltedLevels.post_process_apply">[docs]</a>
    <span class="k">def</span> <span class="nf">post_process_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply post-processing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span>
            <span class="k">else</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformExplodeMeltedLevelsSuccess">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsSuccess">[docs]</a>
<span class="k">class</span> <span class="nc">TransformExplodeMeltedLevelsSuccess</span><span class="p">(</span>
    <span class="n">TransformApplyMeasureMixin</span><span class="p">,</span> <span class="n">TransformWrapExplodeMeltedLevels</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Transformation step that applies a function on targets.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TransformExplodeMeltedLevelsSuccess.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsSuccess.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outcome</span><span class="p">:</span> <span class="n">AttemptOutcomeModality</span> <span class="o">=</span> <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">ALL</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span></div>


<div class="viewcode-block" id="TransformExplodeMeltedLevelsSuccess.get_new_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsSuccess.get_new_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_new_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get new data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformExplodeMeltedLevelsSuccess.get_column_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsSuccess.get_column_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformExplodeMeltedLevelsSuccess.get_column_name">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsSuccess.get_column_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="TransformSuccessDeformingDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformSuccessDeformingDuration">[docs]</a>
<span class="k">class</span> <span class="nc">TransformSuccessDeformingDuration</span><span class="p">(</span><span class="n">TransformExplodeMeltedLevelsSuccess</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation step to get user&#39;s success duration.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;success duration&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;Time spent before succeeding at deforming the&quot;</span>
        <span class="s2">&quot; target bubble during </span><span class="si">{outcome}</span><span class="s2"> pinch attempt.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformSuccessDeformingDuration.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformSuccessDeformingDuration.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the success duration from attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">success_duration</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformPinchingDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformPinchingDuration">[docs]</a>
<span class="k">class</span> <span class="nc">TransformPinchingDuration</span><span class="p">(</span><span class="n">TransformExplodeMeltedLevelsSuccess</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A raw data set transformation step to get user&#39;s pinching duration.</span>

<span class="sd">    To get the pinching duration of the user.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;pinching duration&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;Time spent actually deforming the target &quot;</span>
        <span class="s2">&quot;bubble during </span><span class="si">{outcome}</span><span class="s2"> pinch attempt.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformPinchingDuration.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformPinchingDuration.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the pinching duration from attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">pinching_duration</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformExplodeMeltedLevelsAttempt">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsAttempt">[docs]</a>
<span class="k">class</span> <span class="nc">TransformExplodeMeltedLevelsAttempt</span><span class="p">(</span>
    <span class="n">TransformApplyMeasureMixin</span><span class="p">,</span> <span class="n">TransformWrapExplodeMeltedLevels</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Transformation step that applies a function on targets.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TransformExplodeMeltedLevelsAttempt.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsAttempt.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">AttemptSelectionModality</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span> <span class="o">=</span> <span class="n">attempt</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span></div>


<div class="viewcode-block" id="TransformExplodeMeltedLevelsAttempt.get_new_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsAttempt.get_new_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_new_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get new data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformExplodeMeltedLevelsAttempt.get_column_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsAttempt.get_column_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformExplodeMeltedLevelsAttempt.get_column_name">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformExplodeMeltedLevelsAttempt.get_column_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="TransformDwellTime">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformDwellTime">[docs]</a>
<span class="k">class</span> <span class="nc">TransformDwellTime</span><span class="p">(</span><span class="n">TransformExplodeMeltedLevelsAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation step to get user&#39;s dwell time.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;dwell time&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;Time spent between the first screen touching &quot;</span>
        <span class="s2">&quot;and the initiation of the movement for &quot;</span>
        <span class="s2">&quot;</span><span class="si">{attempt}</span><span class="s2"> pinch attempts.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformDwellTime.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformDwellTime.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the pinching attempts&#39; dwell times.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="n">dwell_time</span><span class="p">,</span> <span class="n">attempt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformDoubleTouchAsynchrony">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformDoubleTouchAsynchrony">[docs]</a>
<span class="k">class</span> <span class="nc">TransformDoubleTouchAsynchrony</span><span class="p">(</span><span class="n">TransformExplodeMeltedLevelsAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A transformation step to get user&#39;s double touch asynchrony.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;double touch asynchrony&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;Time difference between the first and second&quot;</span>
        <span class="s2">&quot; finger touching the screen for </span><span class="si">{attempt}</span><span class="s2"> &quot;</span>
        <span class="s2">&quot;pinch attempts.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformDoubleTouchAsynchrony.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformDoubleTouchAsynchrony.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the pinching attempts&#39; double touch asynchrony.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="n">double_touch_asynchrony</span><span class="p">,</span> <span class="n">attempt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TransformAttempt">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt">[docs]</a>
<span class="k">class</span> <span class="nc">TransformAttempt</span><span class="p">(</span>
    <span class="n">TransformApplyMeasureMixin</span><span class="p">,</span> <span class="n">TransformWrapExplodeMeltedLevels</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for finger.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    finger</span>
<span class="sd">        The desired finger to compute (&#39;top&#39; or &#39;bottom&#39;).</span>
<span class="sd">    outcome</span>
<span class="sd">        Pinching attempt success modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="TransformAttempt.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">finger</span><span class="p">:</span> <span class="n">FingerModality</span><span class="p">,</span>
        <span class="n">outcome</span><span class="p">:</span> <span class="n">AttemptOutcomeModality</span> <span class="o">=</span> <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger</span> <span class="o">=</span> <span class="n">finger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span></div>


<div class="viewcode-block" id="TransformAttempt.get_new_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt.get_new_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_new_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get new data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_&quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformAttempt.get_column_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt.get_column_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="TransformAttempt.get_column_name">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt.get_column_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="si">}</span><span class="s2"> data for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="si">}</span><span class="s2"> attempt&quot;</span></div>


<div class="viewcode-block" id="TransformAttempt.get_finger">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt.get_finger">[docs]</a>
    <span class="k">def</span> <span class="nf">get_finger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">PinchAttempt</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PinchTouch</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get finger from an attempt.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">finger</span> <span class="o">==</span> <span class="n">FingerModality</span><span class="o">.</span><span class="n">TOP_FINGER</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">attempt</span><span class="o">.</span><span class="n">top_finger</span>
        <span class="k">return</span> <span class="n">attempt</span><span class="o">.</span><span class="n">bottom_finger</span></div>


<div class="viewcode-block" id="TransformAttempt.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt.get_property">[docs]</a>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">Touch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


    <span class="k">def</span> <span class="nf">_touch_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">PinchTarget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the measure for a specific finger for all attempt.&quot;&quot;&quot;</span>
        <span class="n">touch_method</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_finger</span><span class="p">(</span><span class="n">attempt</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="n">target</span><span class="o">.</span><span class="n">get_attempts_from</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_finger</span><span class="p">(</span><span class="n">attempt</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">touch_method</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">touch_method</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">touch_method</span>

        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">touch_method</span><span class="p">,</span> <span class="p">[])</span>

<div class="viewcode-block" id="TransformAttempt.get_apply_function">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttempt.get_apply_function">[docs]</a>
    <span class="k">def</span> <span class="nf">get_apply_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the pinching attempts&#39; for the specific measure.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_touch_function</span></div>
</div>



<div class="viewcode-block" id="TransformPressures">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformPressures">[docs]</a>
<span class="k">class</span> <span class="nc">TransformPressures</span><span class="p">(</span><span class="n">TransformAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for finger pressures.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;pressure&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The pressure applied on the screen by the </span><span class="si">{finger}</span><span class="s2"> for </span><span class="si">{outcome}</span><span class="s2"> attempt.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformPressures.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformPressures.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">Touch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">attempt</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="TransformSpeed">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformSpeed">[docs]</a>
<span class="k">class</span> <span class="nc">TransformSpeed</span><span class="p">(</span><span class="n">TransformAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step to get finger speed.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;speed&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;The speed of the </span><span class="si">{finger}</span><span class="s2"> during </span><span class="si">{outcome}</span><span class="s2"> pinch attempts.&quot;</span>

<div class="viewcode-block" id="TransformSpeed.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformSpeed.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">Touch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">attempt</span><span class="o">.</span><span class="n">speed</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="TransformJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformJerk">[docs]</a>
<span class="k">class</span> <span class="nc">TransformJerk</span><span class="p">(</span><span class="n">TransformAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step to get jerk movements.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;jerk&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;The jerk of the </span><span class="si">{finger}</span><span class="s2"> during </span><span class="si">{outcome}</span><span class="s2"> pinch attempts.&quot;</span>

<div class="viewcode-block" id="TransformJerk.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformJerk.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">Touch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">attempt</span><span class="o">.</span><span class="n">jerk</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="TransformMeanSquaredJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformMeanSquaredJerk">[docs]</a>
<span class="k">class</span> <span class="nc">TransformMeanSquaredJerk</span><span class="p">(</span><span class="n">TransformAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step for mean squared jerk.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;ms jerk&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The mean squared jerk of the </span><span class="si">{finger}</span><span class="s2"> during </span><span class="si">{outcome}</span><span class="s2"> pinch attempts.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformMeanSquaredJerk.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformMeanSquaredJerk.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">Touch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">attempt</span><span class="o">.</span><span class="n">mean_squared_jerk</span><span class="p">]</span></div>
</div>



<div class="viewcode-block" id="TransformPressureJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformPressureJerk">[docs]</a>
<span class="k">class</span> <span class="nc">TransformPressureJerk</span><span class="p">(</span><span class="n">TransformAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation processing step to get jerk pressure.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;pressure jerk&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;The jerk pressure of the </span><span class="si">{finger}</span><span class="s2"> during </span><span class="si">{outcome}</span><span class="s2"> pinch attempts.&quot;</span>

<div class="viewcode-block" id="TransformPressureJerk.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformPressureJerk.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">Touch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">attempt</span><span class="o">.</span><span class="n">pressure_jerk</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="TransformMeanSquaredPressureJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformMeanSquaredPressureJerk">[docs]</a>
<span class="k">class</span> <span class="nc">TransformMeanSquaredPressureJerk</span><span class="p">(</span><span class="n">TransformAttempt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A processing step to get mean squared jerk pressure.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;ms pressure jerk&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The mean squared jerk pressure of the </span><span class="si">{finger}</span><span class="s2"> &quot;</span>
        <span class="s2">&quot;during </span><span class="si">{outcome}</span><span class="s2"> pinch attempts.&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="TransformMeanSquaredPressureJerk.get_property">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformMeanSquaredPressureJerk.get_property">[docs]</a>
    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">Touch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get property from an attempt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">attempt</span><span class="o">.</span><span class="n">mean_squared_pressure_jerk</span><span class="p">]</span></div>
</div>



<div class="viewcode-block" id="TargetPropertiesExtractStep">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TargetPropertiesExtractStep">[docs]</a>
<span class="k">class</span> <span class="nc">TargetPropertiesExtractStep</span><span class="p">(</span><span class="n">ExtractStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A base class for all extraction steps from target properties.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;target-properties&quot;</span></div>



<div class="viewcode-block" id="ExtractTotalPinchAttempts">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractTotalPinchAttempts">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractTotalPinchAttempts</span><span class="p">(</span><span class="n">TargetPropertiesExtractStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract the total pinch attempts.&quot;&quot;&quot;</span>

    <span class="n">transform_function</span> <span class="o">=</span> <span class="n">agg_column</span><span class="p">(</span><span class="s2">&quot;total_pinches&quot;</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">)</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;total pinch attempts&quot;</span><span class="p">,</span> <span class="s2">&quot;att&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The total number of pinch attempts on </span><span class="si">{size}</span><span class="s2"> size for &quot;</span>
        <span class="s2">&quot;the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="ExtractSuccessfulPinchAttempts">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSuccessfulPinchAttempts">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractSuccessfulPinchAttempts</span><span class="p">(</span><span class="n">TargetPropertiesExtractStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract successful pinch attempts.&quot;&quot;&quot;</span>

    <span class="n">transform_function</span> <span class="o">=</span> <span class="n">agg_column</span><span class="p">(</span><span class="s2">&quot;successful_pinches&quot;</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">)</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;successful pinch attempts&quot;</span><span class="p">,</span> <span class="s2">&quot;succ&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number successful pinch attempts on </span><span class="si">{size}</span><span class="s2"> size for &quot;</span>
        <span class="s2">&quot;the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="ExtractPinchAccuracy">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPinchAccuracy">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractPinchAccuracy</span><span class="p">(</span><span class="n">TargetPropertiesExtractStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A pinch accuracy extraction step.&quot;&quot;&quot;</span>

    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;pinching accuracy&quot;</span><span class="p">,</span> <span class="s2">&quot;acc&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">RangeValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ratio of successful pinches on </span><span class="si">{size}</span><span class="s2"> size &quot;</span>
        <span class="s2">&quot;amongst all pinch attempts for the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<div class="viewcode-block" id="ExtractPinchAccuracy.flag_data_sets">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPinchAccuracy.flag_data_sets">[docs]</a>
    <span class="k">def</span> <span class="nf">flag_data_sets</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data_sets</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
        <span class="n">level</span><span class="p">:</span> <span class="n">Level</span><span class="p">,</span>
        <span class="n">reading</span><span class="p">:</span> <span class="n">Reading</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Flag</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Flag that there is at least one pinch attempt.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">flag_data_sets</span><span class="p">(</span><span class="n">data_sets</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">reading</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data_sets</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;total_pinches&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">Flag</span><span class="p">(</span>
                <span class="n">id_</span><span class="o">=</span><span class="s2">&quot;pinch-technical-deviation-ma&quot;</span><span class="p">,</span>
                <span class="n">reason</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Missing pinch attempts for </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="ExtractPinchAccuracy.accuracy">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPinchAccuracy.accuracy">[docs]</a>
    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract pinch accuracy.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">total_pinches</span> <span class="o">:=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;total_pinches&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;successful_pinches&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">total_pinches</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ExtractSuccessBase">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSuccessBase">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractSuccessBase</span><span class="p">(</span><span class="n">TransformApplyMeasureMixin</span><span class="p">,</span> <span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for success modality.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    outcome</span>
<span class="sd">        Pinching attempt success modality</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ExtractSuccessBase.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSuccessBase.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outcome</span><span class="p">:</span> <span class="n">AttemptOutcomeModality</span> <span class="o">=</span> <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">ALL</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">data_set_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_data_set_id</span><span class="p">(),</span> <span class="n">column_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_column_id</span><span class="p">()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ExtractSuccessBase.get_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSuccessBase.get_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="ExtractSuccessBase.get_column_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSuccessBase.get_column_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="ExtractSuccessBase.get_definition">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSuccessBase.get_definition">[docs]</a>
    <span class="k">def</span> <span class="nf">get_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get value definition.&quot;&quot;&quot;</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;outcome&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">av</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_definition</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ExtractSuccessDeformingDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSuccessDeformingDuration">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractSuccessDeformingDuration</span><span class="p">(</span><span class="n">ExtractSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple success durations.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;success duration&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;success duration&quot;</span><span class="p">,</span> <span class="s2">&quot;sd&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Time </span><span class="si">{aggregation}</span><span class="s2"> spent before succeeding at &quot;</span>
        <span class="s2">&quot;deforming </span><span class="si">{size}</span><span class="s2"> size during &quot;</span>
        <span class="s2">&quot;</span><span class="si">{outcome}</span><span class="s2"> pinch attempt with the &quot;</span>
        <span class="s2">&quot;</span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_BASIC_MODALITY_AGGREGATIONS</span></div>



<div class="viewcode-block" id="ExtractPinchingDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPinchingDuration">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractPinchingDuration</span><span class="p">(</span><span class="n">ExtractSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple pinching durations.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;pinching duration&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;pinching duration&quot;</span><span class="p">,</span> <span class="s2">&quot;pd&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Time </span><span class="si">{aggregation}</span><span class="s2"> spent actually deforming </span><span class="si">{size}</span><span class="s2"> size &quot;</span>
        <span class="s2">&quot;during </span><span class="si">{outcome}</span><span class="s2"> pinch attempt with the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_BASIC_MODALITY_AGGREGATIONS</span></div>



<div class="viewcode-block" id="ExtractDwellTime">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractDwellTime">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractDwellTime</span><span class="p">(</span><span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple dwell times.&quot;&quot;&quot;</span>

    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;dwell time&quot;</span><span class="p">,</span> <span class="s2">&quot;dt&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time spent between the first screen&quot;</span>
        <span class="s2">&quot; touching and the initiation of the movement &quot;</span>
        <span class="s2">&quot;for </span><span class="si">{attempt}</span><span class="s2"> attempts made of the bubble of size &quot;</span>
        <span class="s2">&quot;</span><span class="si">{size}</span><span class="s2"> with the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">DEFAULT_AGGREGATIONS_CV</span>

<div class="viewcode-block" id="ExtractDwellTime.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractDwellTime.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">AttemptSelectionModality</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span> <span class="o">=</span> <span class="n">attempt</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">data_set_id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_dwell_time&quot;</span><span class="p">,</span>
            <span class="n">column_id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-dwell-time&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ExtractDoubleTouchAsynchrony">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractDoubleTouchAsynchrony">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractDoubleTouchAsynchrony</span><span class="p">(</span><span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An extraction step for multiple double touch asynchrony values.&quot;&quot;&quot;</span>

    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;double touch asynchrony&quot;</span><span class="p">,</span> <span class="s2">&quot;dta&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time difference between the first &quot;</span>
        <span class="s2">&quot;and second finger touching the screen for &quot;</span>
        <span class="s2">&quot; </span><span class="si">{attempt}</span><span class="s2"> attempts made of the bubble of size &quot;</span>
        <span class="s2">&quot;</span><span class="si">{size}</span><span class="s2"> with the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">DEFAULT_AGGREGATIONS_CV</span>

<div class="viewcode-block" id="ExtractDoubleTouchAsynchrony.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractDoubleTouchAsynchrony.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">AttemptSelectionModality</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span> <span class="o">=</span> <span class="n">attempt</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">data_set_id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_double_touch_asynchrony&quot;</span><span class="p">,</span>
            <span class="n">column_id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-double-touch-asynchrony&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ExtractFingerSuccessBase">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFingerSuccessBase">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractFingerSuccessBase</span><span class="p">(</span><span class="n">TransformApplyMeasureMixin</span><span class="p">,</span> <span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for finger and success modalities.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    finger</span>
<span class="sd">        The desired finger to compute (&#39;top&#39; or &#39;bottom&#39;).</span>
<span class="sd">    outcome</span>
<span class="sd">        Pinching attempt success modality</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ExtractFingerSuccessBase.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFingerSuccessBase.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">finger</span><span class="p">:</span> <span class="n">FingerModality</span><span class="p">,</span>
        <span class="n">outcome</span><span class="p">:</span> <span class="n">AttemptOutcomeModality</span> <span class="o">=</span> <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger</span> <span class="o">=</span> <span class="n">finger</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">data_set_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_data_set_id</span><span class="p">(),</span> <span class="n">column_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_column_id</span><span class="p">()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="ExtractFingerSuccessBase.get_data_set_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFingerSuccessBase.get_data_set_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_data_set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get data set id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">av</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="ExtractFingerSuccessBase.get_column_id">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFingerSuccessBase.get_column_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_column_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get column id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">av</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">measure_id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="ExtractFingerSuccessBase.get_definition">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFingerSuccessBase.get_definition">[docs]</a>
    <span class="k">def</span> <span class="nf">get_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get value definition.&quot;&quot;&quot;</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;finger&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">av</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;outcome&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcome</span><span class="o">.</span><span class="n">av</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_definition</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ExtractContactDistance">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractContactDistance">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractContactDistance</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple contact distances.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;contact distance&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;contact distance&quot;</span><span class="p">,</span> <span class="s2">&quot;cd&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;point&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> distance between the initial &quot;</span>
        <span class="s2">&quot;point of contact on the screen with the </span><span class="si">{finger}</span><span class="s2"> &quot;</span>
        <span class="s2">&quot;of the </span><span class="si">{hand}</span><span class="s2"> hand and the surface of the target &quot;</span>
        <span class="s2">&quot;bubble for </span><span class="si">{size}</span><span class="s2"> size for the </span><span class="si">{outcome}</span><span class="s2"> attempt.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_EXTENDED_MODALITY_AGGREGATIONS</span></div>



<div class="viewcode-block" id="ExtractFirstPushes">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFirstPushes">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractFirstPushes</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for first finger pushes.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;first push&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;first push&quot;</span><span class="p">,</span> <span class="s2">&quot;fp&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> first pressure value applied on&quot;</span>
        <span class="s2">&quot; the screen for </span><span class="si">{outcome}</span><span class="s2"> attempt by the </span><span class="si">{finger}</span><span class="s2"> of &quot;</span>
        <span class="s2">&quot;the </span><span class="si">{hand}</span><span class="s2"> hand for </span><span class="si">{size}</span><span class="s2"> size.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">variation</span><span class="p">,</span> <span class="s2">&quot;coefficient of variation&quot;</span><span class="p">),</span>
    <span class="p">]</span></div>



<div class="viewcode-block" id="ExtractPressures">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPressures">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractPressures</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple finger pressures.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;pressure&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;pressure&quot;</span><span class="p">,</span> <span class="s2">&quot;press&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> pressure applied on the screen &quot;</span>
        <span class="s2">&quot;by the </span><span class="si">{finger}</span><span class="s2"> of the </span><span class="si">{hand}</span><span class="s2"> hand for </span><span class="si">{size}</span><span class="s2"> size for &quot;</span>
        <span class="s2">&quot;</span><span class="si">{outcome}</span><span class="s2"> attempt.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;standard deviation&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;skew&quot;</span><span class="p">,</span> <span class="s2">&quot;skewness&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;kurtosis&quot;</span><span class="p">,</span> <span class="s2">&quot;kurtosis&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">variation</span><span class="p">,</span> <span class="s2">&quot;coefficient of variation&quot;</span><span class="p">),</span>
    <span class="p">]</span></div>



<div class="viewcode-block" id="ExtractSpeed">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSpeed">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractSpeed</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple finger speed.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;speed&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;speed&quot;</span><span class="p">,</span> <span class="s2">&quot;speed&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> speed &quot;</span>
        <span class="s2">&quot;by the </span><span class="si">{finger}</span><span class="s2"> of the </span><span class="si">{hand}</span><span class="s2"> hand for </span><span class="si">{size}</span><span class="s2"> size for&quot;</span>
        <span class="s2">&quot; </span><span class="si">{outcome}</span><span class="s2"> attempts.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;standard deviation&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">percentile_95</span><span class="p">,</span> <span class="s2">&quot;95th percentile&quot;</span><span class="p">),</span>
    <span class="p">]</span></div>



<div class="viewcode-block" id="ExtractJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractJerk">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractJerk</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple jerk finger.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;jerk&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;movement jerk&quot;</span><span class="p">,</span> <span class="s2">&quot;jerk&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> jerk &quot;</span>
        <span class="s2">&quot;by the </span><span class="si">{finger}</span><span class="s2"> of the </span><span class="si">{hand}</span><span class="s2"> hand for </span><span class="si">{size}</span><span class="s2"> size for &quot;</span>
        <span class="s2">&quot;</span><span class="si">{outcome}</span><span class="s2">  attempts.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;standard deviation&quot;</span><span class="p">),</span>
    <span class="p">]</span></div>



<div class="viewcode-block" id="ExtractMeanSquaredJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractMeanSquaredJerk">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractMeanSquaredJerk</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction for multiple mean squared jerk.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;ms jerk&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;mean squared jerk&quot;</span><span class="p">,</span> <span class="s2">&quot;msj&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;px^2/ms^6&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> mean squared jerk&quot;</span>
        <span class="s2">&quot; applied on the screen for &quot;</span>
        <span class="s2">&quot;</span><span class="si">{outcome}</span><span class="s2"> attempts by the&quot;</span>
        <span class="s2">&quot; </span><span class="si">{finger}</span><span class="s2"> of the </span><span class="si">{hand}</span><span class="s2"> hand for </span><span class="si">{size}</span><span class="s2"> size.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_EXTENDED_MODALITY_AGGREGATIONS</span></div>



<div class="viewcode-block" id="ExtractPressureJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPressureJerk">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractPressureJerk</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction processing step for multiple jerk pressures.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;pressure jerk&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;pressure jerk&quot;</span><span class="p">,</span> <span class="s2">&quot;press_jerk&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> jerk pressure applied on &quot;</span>
        <span class="s2">&quot;the screen for the </span><span class="si">{outcome}</span><span class="s2"> &quot;</span>
        <span class="s2">&quot;attempts by the </span><span class="si">{finger}</span><span class="s2"> &quot;</span>
        <span class="s2">&quot;of the </span><span class="si">{hand}</span><span class="s2"> hand for </span><span class="si">{size}</span><span class="s2"> size.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_EXTENDED_MODALITY_AGGREGATIONS</span></div>



<div class="viewcode-block" id="ExtractMeanSquaredPressureJerk">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractMeanSquaredPressureJerk">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractMeanSquaredPressureJerk</span><span class="p">(</span><span class="n">ExtractFingerSuccessBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure extraction for multiple mean squared jerk of pressures.&quot;&quot;&quot;</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;ms pressure jerk&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;mean squared pressure jerk&quot;</span><span class="p">,</span> <span class="s2">&quot;mspj&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;pa^2/ms^6&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">GREATER_THAN_ZERO</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> mean squared jerk pressure&quot;</span>
        <span class="s2">&quot; applied on the screen for the &quot;</span>
        <span class="s2">&quot;</span><span class="si">{outcome}</span><span class="s2"> attempt by the &quot;</span>
        <span class="s2">&quot;</span><span class="si">{finger}</span><span class="s2"> of the </span><span class="si">{hand}</span><span class="s2"> hand for </span><span class="si">{size}</span><span class="s2"> size.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;standard deviation&quot;</span><span class="p">),</span>
    <span class="p">]</span></div>



<div class="viewcode-block" id="ExtractReactionTime">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractReactionTime">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractReactionTime</span><span class="p">(</span><span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure reaction time extraction processing step.&quot;&quot;&quot;</span>

    <span class="n">level_filter</span> <span class="o">=</span> <span class="n">LevelIdFilter</span><span class="p">(</span><span class="s2">&quot;melted_levels&quot;</span><span class="p">)</span>
    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;reaction-time&quot;</span>
    <span class="n">column_id</span> <span class="o">=</span> <span class="s2">&quot;reaction_time&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;reaction time&quot;</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR_MS</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time spent between the appearance &quot;</span>
        <span class="s2">&quot;of target bubbles and actually touching the screen.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">variation_increase</span><span class="p">,</span> <span class="s2">&quot;coefficient of variation increase&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;standard deviation&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;maximum&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">variation</span><span class="p">,</span> <span class="s2">&quot;coefficient of variation&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">percentile_95</span><span class="p">,</span> <span class="s2">&quot;95th percentile&quot;</span><span class="p">),</span>
    <span class="p">]</span></div>



<div class="viewcode-block" id="ExtractReactionTimeByBubbleSize">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractReactionTimeByBubbleSize">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractReactionTimeByBubbleSize</span><span class="p">(</span>
    <span class="n">BubbleSizeTransformMixin</span><span class="p">,</span> <span class="n">AggregateRawDataSetColumn</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure reaction time by bubble size extraction processing step.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;bubble_reaction_time&quot;</span>
    <span class="n">column_id</span> <span class="o">=</span> <span class="s2">&quot;bubble-reaction-time&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;reaction time&quot;</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR_MS</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time spent between the appearance &quot;</span>
        <span class="s2">&quot;of target bubble </span><span class="si">{size}</span><span class="s2"> size and actually touching the &quot;</span>
        <span class="s2">&quot;screen.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_BASIC_MODALITY_AGGREGATIONS</span></div>



<div class="viewcode-block" id="ExtractReactionTimeByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractReactionTimeByHand">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractReactionTimeByHand</span><span class="p">(</span><span class="n">HandModalityFilterMixin</span><span class="p">,</span> <span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A pinch reaction time by hand extraction step.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;reaction-time&quot;</span>
    <span class="n">column_id</span> <span class="o">=</span> <span class="s2">&quot;reaction_time&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;reaction time&quot;</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR_MS</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time spent between the appearance &quot;</span>
        <span class="s2">&quot;of target bubbles and actually touching the screen.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">variation_increase</span><span class="p">,</span> <span class="s2">&quot;coefficient of variation increase&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;standard deviation&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;maximum&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">variation</span><span class="p">,</span> <span class="s2">&quot;coefficient of variation&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">percentile_95</span><span class="p">,</span> <span class="s2">&quot;95th percentile&quot;</span><span class="p">),</span>
    <span class="p">]</span>

<div class="viewcode-block" id="ExtractReactionTimeByHand.get_level_filter">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractReactionTimeByHand.get_level_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LevelFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get level filter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">LevelIdFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ExtractFirstReactionTimeByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFirstReactionTimeByHand">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractFirstReactionTimeByHand</span><span class="p">(</span><span class="n">HandModalityFilterMixin</span><span class="p">,</span> <span class="n">ExtractStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A first pinch reaction time by hand extraction step.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;melted_targets&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;first pinch reaction time&quot;</span><span class="p">,</span> <span class="s2">&quot;fprt&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR_MS</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time spent between the appearance &quot;</span>
        <span class="s2">&quot;of the target and actually touching the &quot;</span>
        <span class="s2">&quot;screen for the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<div class="viewcode-block" id="ExtractFirstReactionTimeByHand.get_level_filter">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractFirstReactionTimeByHand.get_level_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LevelFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get level filter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">LevelIdFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span></div>


    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">_first_pinch_reaction_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="n">first_target</span><span class="p">:</span> <span class="n">PinchTarget</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">appearance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">first_target</span><span class="o">.</span><span class="n">reaction_time</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e3</span></div>



<div class="viewcode-block" id="ExtractTotalDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractTotalDuration">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractTotalDuration</span><span class="p">(</span><span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measure total duration extraction processing step.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;total-duration&quot;</span>
    <span class="n">column_id</span> <span class="o">=</span> <span class="s2">&quot;total_duration&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;duration&quot;</span><span class="p">,</span> <span class="s2">&quot;dur&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time spent during pinching events &quot;</span>
        <span class="s2">&quot;of </span><span class="si">{size}</span><span class="s2"> size using the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_BASIC_MODALITY_AGGREGATIONS</span></div>



<div class="viewcode-block" id="PinchAggregateModalitiesByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchAggregateModalitiesByHand">[docs]</a>
<span class="k">class</span> <span class="nc">PinchAggregateModalitiesByHand</span><span class="p">(</span><span class="n">AggregateModalities</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base step to aggregate measures by hand for PINCH task.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        The hand modality for which to aggregate measures.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchAggregateModalitiesByHand.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchAggregateModalitiesByHand.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">hand</span></div>


<div class="viewcode-block" id="PinchAggregateModalitiesByHand.get_definition">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchAggregateModalitiesByHand.get_definition">[docs]</a>
    <span class="k">def</span> <span class="nf">get_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the definition.&quot;&quot;&quot;</span>
        <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">new_kwargs</span><span class="p">[</span><span class="s2">&quot;modalities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">]</span>
        <span class="n">new_kwargs</span><span class="p">[</span><span class="s2">&quot;hand&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">MeasureValueDefinitionPrototype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="p">)</span><span class="o">.</span><span class="n">create_definition</span><span class="p">(</span>
            <span class="o">**</span><span class="n">new_kwargs</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="PinchAggregateModalitiesByHand.get_modalities">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchAggregateModalitiesByHand.get_modalities">[docs]</a>
    <span class="k">def</span> <span class="nf">get_modalities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AV</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the modalities.&quot;&quot;&quot;</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span><span class="p">:</span>
            <span class="n">ids</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">ids</span></div>
</div>



<div class="viewcode-block" id="AggregateSuccessfulPinchesByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.AggregateSuccessfulPinchesByHand">[docs]</a>
<span class="k">class</span> <span class="nc">AggregateSuccessfulPinchesByHand</span><span class="p">(</span><span class="n">PinchAggregateModalitiesByHand</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate successful pinch attempts by hand.&quot;&quot;&quot;</span>

    <span class="n">definition</span> <span class="o">=</span> <span class="n">ExtractSuccessfulPinchAttempts</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">derive</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of successful pinch attempts for the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_agg_method</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">aggregation_method</span> <span class="o">=</span> <span class="n">_agg_method</span></div>



<div class="viewcode-block" id="AggregateDoubleTouchAsynchronyByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.AggregateDoubleTouchAsynchronyByHand">[docs]</a>
<span class="k">class</span> <span class="nc">AggregateDoubleTouchAsynchronyByHand</span><span class="p">(</span><span class="n">AggregateModalities</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate double touch asynchrony by hand.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="AggregateDoubleTouchAsynchronyByHand.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.AggregateDoubleTouchAsynchronyByHand.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span> <span class="n">attempt</span><span class="p">:</span> <span class="n">AttemptSelectionModality</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">hand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span> <span class="o">=</span> <span class="n">attempt</span></div>


<div class="viewcode-block" id="AggregateDoubleTouchAsynchronyByHand.get_definition">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.AggregateDoubleTouchAsynchronyByHand.get_definition">[docs]</a>
    <span class="k">def</span> <span class="nf">get_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the definition.&quot;&quot;&quot;</span>
        <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">new_kwargs</span><span class="p">[</span><span class="s2">&quot;modalities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">av</span><span class="p">]</span>
        <span class="n">new_kwargs</span><span class="p">[</span><span class="s2">&quot;hand&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span>
        <span class="n">new_kwargs</span><span class="p">[</span><span class="s2">&quot;attempt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">av</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">MeasureValueDefinitionPrototype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="p">)</span><span class="o">.</span><span class="n">create_definition</span><span class="p">(</span>
            <span class="o">**</span><span class="n">new_kwargs</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="AggregateDoubleTouchAsynchronyByHand.get_modalities">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.AggregateDoubleTouchAsynchronyByHand.get_modalities">[docs]</a>
    <span class="k">def</span> <span class="nf">get_modalities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AV</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the modalities.&quot;&quot;&quot;</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span><span class="p">:</span>
            <span class="n">ids</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="o">.</span><span class="n">av</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">ids</span></div>


    <span class="n">definition</span> <span class="o">=</span> <span class="n">ExtractDoubleTouchAsynchrony</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">derive</span><span class="p">(</span>
        <span class="n">aggregation</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The mean time difference between the first &quot;</span>
        <span class="s2">&quot;and second finger touching the screen for </span><span class="si">{attempt}</span><span class="s2"> &quot;</span>
        <span class="s2">&quot;pinch attempt made with the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="AggregatePinchAccuracyByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.AggregatePinchAccuracyByHand">[docs]</a>
<span class="k">class</span> <span class="nc">AggregatePinchAccuracyByHand</span><span class="p">(</span><span class="n">PinchAggregateModalitiesByHand</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate pinch accuracy by hand.&quot;&quot;&quot;</span>

    <span class="n">definition</span> <span class="o">=</span> <span class="n">ExtractPinchAccuracy</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">derive</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ratio of successful pinches amongst all pinch &quot;</span>
        <span class="s2">&quot;attempts for the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="AggregateTotalPinchAttemptsByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.AggregateTotalPinchAttemptsByHand">[docs]</a>
<span class="k">class</span> <span class="nc">AggregateTotalPinchAttemptsByHand</span><span class="p">(</span><span class="n">PinchAggregateModalitiesByHand</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract the total pinch attempts.&quot;&quot;&quot;</span>

    <span class="n">definition</span> <span class="o">=</span> <span class="n">ExtractTotalPinchAttempts</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">derive</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The total number of pinch attempts for the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_agg_method</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">aggregation_method</span> <span class="o">=</span> <span class="n">_agg_method</span></div>



<div class="viewcode-block" id="PinchProcessingLevel">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingLevel">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingLevel</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for measures by level id.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    level_id</span>
<span class="sd">        Level id.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingLevel.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingLevel.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">PinchConcatenateTargets</span><span class="p">(</span><span class="n">level_filter</span><span class="o">=</span><span class="n">LevelIdFilter</span><span class="p">(</span><span class="n">level_id</span><span class="p">)),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingLevelTarget">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingLevelTarget">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingLevelTarget</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for measures by targets.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingLevelTarget.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingLevelTarget.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span><span class="n">PinchConcatenateTargetsLevels</span><span class="p">(),</span> <span class="n">TransformReactionTime</span><span class="p">()]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingSize">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingSize">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingSize</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for measures by bubble size.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingSize.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingSize.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">PinchConcatenateBubbles</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">),</span>
            <span class="n">TransformReactionTimeByBubbleSize</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">),</span>
            <span class="n">ExtractReactionTimeByBubbleSize</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span> <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="o">.</span><span class="n">variable</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchConcatenateHandsGroup">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateHandsGroup">[docs]</a>
<span class="k">class</span> <span class="nc">PinchConcatenateHandsGroup</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for measures by hands.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchConcatenateHandsGroup.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchConcatenateHandsGroup.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">):</span>
        <span class="n">steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ProcessingStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">PinchConcatenateHands</span><span class="p">(</span>
                <span class="n">hand</span><span class="p">,</span>
                <span class="nb">list</span><span class="p">(</span>
                    <span class="nb">map</span><span class="p">(</span>
                        <span class="nb">str</span><span class="p">,</span>
                        <span class="p">[</span>
                            <span class="n">SensorModality</span><span class="o">.</span><span class="n">ACCELEROMETER</span><span class="p">,</span>
                            <span class="n">SensorModality</span><span class="o">.</span><span class="n">GYROSCOPE</span><span class="p">,</span>
                            <span class="s2">&quot;melted_targets&quot;</span><span class="p">,</span>
                        <span class="p">],</span>
                    <span class="p">)</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">],</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchReactionTimeByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchReactionTimeByHand">[docs]</a>
<span class="k">class</span> <span class="nc">PinchReactionTimeByHand</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for reaction time measures by hands.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchReactionTimeByHand.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchReactionTimeByHand.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">):</span>
        <span class="n">steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ProcessingStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ExtractFirstReactionTimeByHand</span><span class="p">(</span><span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">),</span>
            <span class="n">TransformReactionTime</span><span class="p">(</span><span class="n">level_filter</span><span class="o">=</span><span class="n">LevelIdFilter</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)),</span>
            <span class="n">ExtractReactionTimeByHand</span><span class="p">(</span><span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">],</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingHandSensor">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSensor">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingHandSensor</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for tremor measures.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        The hand on which the tremor measures are to be computed.</span>
<span class="sd">    sensor</span>
<span class="sd">        The sensor on which the tremor measures are to be computed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingHandSensor.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSensor.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span> <span class="n">sensor</span><span class="p">:</span> <span class="n">SensorModality</span><span class="p">):</span>
        <span class="n">data_set_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sensor</span><span class="p">)</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">RenameColumns</span><span class="p">(</span><span class="n">data_set_id</span><span class="p">,</span> <span class="n">hand</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span> <span class="o">**</span><span class="n">USER_ACC_MAP</span><span class="p">),</span>
            <span class="n">SetTimestampIndex</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data_set_id</span><span class="si">}</span><span class="s2">_renamed&quot;</span><span class="p">,</span> <span class="n">DEFAULT_COLUMNS</span><span class="p">,</span> <span class="s2">&quot;ts&quot;</span><span class="p">,</span> <span class="n">duplicates</span><span class="o">=</span><span class="s2">&quot;last&quot;</span>
            <span class="p">),</span>
            <span class="n">Resample</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data_set_id</span><span class="si">}</span><span class="s2">_renamed_ts&quot;</span><span class="p">,</span>
                <span class="n">aggregations</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;ffill&quot;</span><span class="p">],</span>
                <span class="n">columns</span><span class="o">=</span><span class="n">DEFAULT_COLUMNS</span><span class="p">,</span>
                <span class="n">freq</span><span class="o">=</span><span class="n">FREQ_20HZ</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">TremorMeasures</span><span class="p">(</span>
                <span class="n">sensor</span><span class="o">=</span><span class="n">sensor</span><span class="p">,</span> <span class="n">data_set_id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data_set_id</span><span class="si">}</span><span class="s2">_renamed_ts_resampled&quot;</span>
            <span class="p">),</span>
        <span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">LevelIdFilter</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">abbr</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">NotEmptyDatasetFilter</span><span class="p">(</span><span class="n">data_set_id</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingHandSize">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSize">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingHandSize</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for measures by bubbles and hands.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    size</span>
<span class="sd">        Bubble size modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingHandSize.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSize.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformTargetProperties</span><span class="p">(),</span>
            <span class="n">TransformTotalDuration</span><span class="p">(),</span>
            <span class="n">TransformSuccessDeformingDuration</span><span class="p">(),</span>
            <span class="n">TransformPinchingDuration</span><span class="p">(),</span>
            <span class="n">ExtractSuccessDeformingDuration</span><span class="p">(),</span>
            <span class="n">ExtractPinchingDuration</span><span class="p">(),</span>
            <span class="n">ExtractTotalPinchAttempts</span><span class="p">(),</span>
            <span class="n">ExtractSuccessfulPinchAttempts</span><span class="p">(),</span>
            <span class="n">ExtractPinchAccuracy</span><span class="p">(),</span>
            <span class="n">ExtractTotalDuration</span><span class="p">(),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">HandModalityFilter</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">BubbleSizeModalityFilter</span><span class="p">(</span><span class="n">size</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingHandSizeAttempt">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeAttempt">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingHandSizeAttempt</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps by bubbles, hands and attempts.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    size</span>
<span class="sd">        Bubble size modality.</span>
<span class="sd">    attempt</span>
<span class="sd">        Pinching attempt selection modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingHandSizeAttempt.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeAttempt.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span>
        <span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span><span class="p">,</span>
        <span class="n">attempt</span><span class="p">:</span> <span class="n">AttemptSelectionModality</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformDwellTime</span><span class="p">(</span><span class="n">attempt</span><span class="p">),</span>
            <span class="n">TransformDoubleTouchAsynchrony</span><span class="p">(</span><span class="n">attempt</span><span class="p">),</span>
            <span class="n">ExtractDwellTime</span><span class="p">(</span><span class="n">attempt</span><span class="p">),</span>
            <span class="n">ExtractDoubleTouchAsynchrony</span><span class="p">(</span><span class="n">attempt</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">attempt</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
            <span class="n">attempt</span><span class="o">=</span><span class="n">attempt</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">HandModalityFilter</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">BubbleSizeModalityFilter</span><span class="p">(</span><span class="n">size</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingHandSizeFinger">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeFinger">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingHandSizeFinger</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps by bubbles, hands and finger.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    size</span>
<span class="sd">        Bubble size modality.</span>
<span class="sd">    finger</span>
<span class="sd">        Pinching fingers modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingHandSizeFinger.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeFinger.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span><span class="p">,</span> <span class="n">finger</span><span class="p">:</span> <span class="n">FingerModality</span>
    <span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformFirstPushes</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">TransformContactDistance</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">TransformPressures</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">TransformSpeed</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">TransformJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">TransformPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">TransformMeanSquaredJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">TransformMeanSquaredPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractContactDistance</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractFirstPushes</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractPressures</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractSpeed</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractMeanSquaredJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
            <span class="n">ExtractMeanSquaredPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">finger</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
            <span class="n">finger</span><span class="o">=</span><span class="n">finger</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">HandModalityFilter</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">BubbleSizeModalityFilter</span><span class="p">(</span><span class="n">size</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="duration_extended">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.duration_extended">[docs]</a>
<span class="k">def</span> <span class="nf">duration_extended</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">PinchTarget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract several parameters from a pinch target.</span>

<span class="sd">    The parameters extracted are: duration, hand, size, appearance,  number of</span>
<span class="sd">    attempts and whether the first attempt was successful.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    target</span>
<span class="sd">        A pinch target object.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Tuple</span>
<span class="sd">        The user duration of the first attempt time in seconds, the hand,</span>
<span class="sd">        the size, the appearance timestamp, the number of attempts for the</span>
<span class="sd">        target and if the first attempt was successful.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_success</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">attempts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">attempts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">is_success</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">attempts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_successful</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">duration</span><span class="p">,</span>
        <span class="n">target</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="n">target</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="n">target</span><span class="o">.</span><span class="n">appearance</span><span class="p">,</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">attempts</span><span class="p">),</span>
        <span class="n">is_success</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="TransformSingleShotDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformSingleShotDuration">[docs]</a>
<span class="k">class</span> <span class="nc">TransformSingleShotDuration</span><span class="p">(</span><span class="n">TransformMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A raw data set transformation step to get single shot duration.&quot;&quot;&quot;</span>

    <span class="n">new_data_set_id</span> <span class="o">=</span> <span class="s2">&quot;single-shot-duration&quot;</span>
    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;targets&quot;</span><span class="p">,</span> <span class="s2">&quot;targets&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The targets objects.&quot;</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;duration&quot;</span><span class="p">,</span>
            <span class="s2">&quot;duration&quot;</span><span class="p">,</span>
            <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time spent during pinching a bubble&quot;</span>
            <span class="s2">&quot;successfully at first attempt using the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;hand&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hand&quot;</span><span class="p">,</span>
            <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The hand being used to pinch the bubble.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;size&quot;</span><span class="p">,</span>
            <span class="s2">&quot;size&quot;</span><span class="p">,</span>
            <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The size of the bubble being pinched.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;appearance&quot;</span><span class="p">,</span> <span class="s2">&quot;appearance&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamp the bubble appeared.&quot;</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;n_attempts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;number of attempts&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of attempt to pinch the bubble.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;is_successful&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is successful&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A boolean indicating if the target is successful.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>

<div class="viewcode-block" id="TransformSingleShotDuration.single_shot">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformSingleShotDuration.single_shot">[docs]</a>
    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">single_shot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a data set of single shot duration.&quot;&quot;&quot;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;targets&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]})</span>
        <span class="p">(</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hand&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;appearance&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_attempts&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;is_successful&quot;</span><span class="p">],</span>
        <span class="p">)</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">df</span><span class="o">.</span><span class="n">targets</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">duration_extended</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;n_attempts&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">df</span><span class="o">.</span><span class="n">is_successful</span><span class="p">]</span></div>
</div>



<div class="viewcode-block" id="ExtractSingleShotDuration">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSingleShotDuration">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractSingleShotDuration</span><span class="p">(</span><span class="n">HandModalityFilterMixin</span><span class="p">,</span> <span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate single shot duration processing step.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;single-shot-duration&quot;</span>
    <span class="n">column_id</span> <span class="o">=</span> <span class="s2">&quot;duration&quot;</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">PINCH_BASIC_MODALITY_AGGREGATIONS</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;single_shot_dur&quot;</span><span class="p">,</span> <span class="s2">&quot;dur1shot&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">,</span>
        <span class="n">validator</span><span class="o">=</span><span class="n">ATTEMPT_DURATION_VALIDATOR</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time spent during pinching a bubble&quot;</span>
        <span class="s2">&quot;successfully at first attempt using the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<div class="viewcode-block" id="ExtractSingleShotDuration.get_level_filter">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractSingleShotDuration.get_level_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LevelFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get level filter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">LevelIdFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Pinch1ShotDurationByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.Pinch1ShotDurationByHand">[docs]</a>
<span class="k">class</span> <span class="nc">Pinch1ShotDurationByHand</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps for single shot duration by hands.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Pinch1ShotDurationByHand.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.Pinch1ShotDurationByHand.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformSingleShotDuration</span><span class="p">(</span><span class="n">level_filter</span><span class="o">=</span><span class="n">LevelIdFilter</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)),</span>
            <span class="n">ExtractSingleShotDuration</span><span class="p">(</span><span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">],</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="attempts_from_targets">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.attempts_from_targets">[docs]</a>
<span class="k">def</span> <span class="nf">attempts_from_targets</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">PinchTarget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract several parameters from a pinch target.</span>

<span class="sd">    The parameters extracted are: hand, size, appearance and attempts.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    target</span>
<span class="sd">        A pinch target object.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Tuple</span>
<span class="sd">        The hand, the size, the appearance timestamp, the attempts for the</span>
<span class="sd">        target.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">target</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="n">target</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="n">target</span><span class="o">.</span><span class="n">appearance</span><span class="p">,</span>
        <span class="n">target</span><span class="o">.</span><span class="n">attempts</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="peak_properties">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.peak_properties">[docs]</a>
<span class="k">def</span> <span class="nf">peak_properties</span><span class="p">(</span><span class="n">attempt</span><span class="p">:</span> <span class="n">PinchAttempt</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract several peak properties from a pinch target.&quot;&quot;&quot;</span>
    <span class="c1"># Top finger computation</span>
    <span class="n">tf_data</span> <span class="o">=</span> <span class="n">attempt</span><span class="o">.</span><span class="n">top_finger</span><span class="o">.</span><span class="n">speed</span>
    <span class="n">tf_data</span> <span class="o">=</span> <span class="n">tf_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tf_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">keep</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)]</span>
    <span class="n">tf_data</span> <span class="o">=</span> <span class="n">tf_data</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">200</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s2">&quot;ffill&quot;</span><span class="p">)</span>
    <span class="c1"># return NaN if we don&#39;t have enough non NaN values</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tf_data</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span> <span class="o">&lt;=</span> <span class="mi">12</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

    <span class="n">tf_data_f</span> <span class="o">=</span> <span class="n">butterworth_low_pass_filter</span><span class="p">(</span>
        <span class="n">tf_data</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">zero_phase</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="c1"># identify the peaks on the top finger trace</span>
    <span class="n">tf_peaks_index</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">find_peaks</span><span class="p">(</span><span class="n">tf_data_f</span><span class="p">)</span>
    <span class="n">tf_peaks</span> <span class="o">=</span> <span class="n">tf_data_f</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">tf_peaks_index</span><span class="p">]</span>

    <span class="c1"># Bottom Finger Computation</span>
    <span class="n">bf_data</span> <span class="o">=</span> <span class="n">attempt</span><span class="o">.</span><span class="n">bottom_finger</span><span class="o">.</span><span class="n">speed</span>
    <span class="n">bf_data</span> <span class="o">=</span> <span class="n">bf_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bf_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">keep</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)]</span>
    <span class="n">bf_data</span> <span class="o">=</span> <span class="n">bf_data</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">200</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s2">&quot;ffill&quot;</span><span class="p">)</span>
    <span class="c1"># return NaN if we don&#39;t have enough non NaN values</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bf_data</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span> <span class="o">&lt;=</span> <span class="mi">12</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">bf_data_f</span> <span class="o">=</span> <span class="n">butterworth_low_pass_filter</span><span class="p">(</span>
        <span class="n">bf_data</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">zero_phase</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="c1"># identify the peaks on the bottom finger trace</span>
    <span class="n">bf_peaks_index</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">find_peaks</span><span class="p">(</span><span class="n">bf_data_f</span><span class="p">)</span>
    <span class="n">bf_peaks</span> <span class="o">=</span> <span class="n">bf_data_f</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">bf_peaks_index</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="n">tf_data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">tf_peaks</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">tf_peaks</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
        <span class="n">bf_data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">bf_peaks</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">bf_peaks</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="TransformAttemptPeakSpeed">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttemptPeakSpeed">[docs]</a>
<span class="k">class</span> <span class="nc">TransformAttemptPeakSpeed</span><span class="p">(</span><span class="n">TransformMeltedLevels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute attempts peak speed properties for successful pinches.&quot;&quot;&quot;</span>

    <span class="n">new_data_set_id</span> <span class="o">=</span> <span class="s2">&quot;peak-speed-properties&quot;</span>
    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;targets&quot;</span><span class="p">,</span>
            <span class="s2">&quot;targets&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;attempts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;attempts&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;hand&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hand&quot;</span><span class="p">,</span>
            <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The hand used to pinch the bubble.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;size&quot;</span><span class="p">,</span>
            <span class="s2">&quot;size&quot;</span><span class="p">,</span>
            <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The size of the bubble pinched.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;appearance&quot;</span><span class="p">,</span>
            <span class="s2">&quot;appearance&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamp when the bubble appeared.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;attempt_start&quot;</span><span class="p">,</span>
            <span class="s2">&quot;attempt_start&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamp when the attempt starts.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;tf_start&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tf_start&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamp when the top finger touch starts.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;tf_peaks_index&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tf_peaks_index&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamps at which peaks in the top finger &quot;</span>
            <span class="s2">&quot;speed are detected.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;tf_peaks_amp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tf_peaks_amp&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The speed amplitude of the top finger speed peaks.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;bf_start&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bf_start&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamp when the bottom finger touch starts.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;bf_peaks_index&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bf_peaks_index&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The timestamps at which peaks in the bottom finger &quot;</span>
            <span class="s2">&quot;speed are detected.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;bf_peaks_amp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bf_peaks_amp&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The speed amplitude of the bottom finger speed peaks.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>

<div class="viewcode-block" id="TransformAttemptPeakSpeed.get_peak_speed_properties">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformAttemptPeakSpeed.get_peak_speed_properties">[docs]</a>
    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">get_peak_speed_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a data set of single shot duration.&quot;&quot;&quot;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;targets&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]})</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hand&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;appearance&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;attempts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="o">*</span><span class="n">df</span><span class="o">.</span><span class="n">targets</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">attempts_from_targets</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># Explode all the attempts</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s2">&quot;attempts&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="c1"># Only keep successful attempts</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">attempts</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_successful</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="c1"># add attempt start</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;attempt_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">attempts</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">first_touch</span><span class="o">.</span><span class="n">begin</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tf_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tf_peaks_index&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tf_peaks_amp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;bf_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;bf_peaks_index&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;bf_peaks_amp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">df</span>

        <span class="c1"># Compute peak properties</span>
        <span class="p">(</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tf_start&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tf_peaks_index&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;tf_peaks_amp&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;bf_start&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;bf_peaks_index&quot;</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;bf_peaks_amp&quot;</span><span class="p">],</span>
        <span class="p">)</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">df</span><span class="o">.</span><span class="n">attempts</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">peak_properties</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">df</span></div>
</div>



<div class="viewcode-block" id="TransformTimeToPeak">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformTimeToPeak">[docs]</a>
<span class="k">class</span> <span class="nc">TransformTimeToPeak</span><span class="p">(</span><span class="n">TransformStep</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute attempts time to peak speed properties.&quot;&quot;&quot;</span>

    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;peak-speed-properties&quot;</span>
    <span class="n">new_data_set_id</span> <span class="o">=</span> <span class="s2">&quot;time-to-peak-speed&quot;</span>
    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;tf_peak_time&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tf_peak_time&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time to the first peak of speed amplitude of the &quot;</span>
            <span class="s2">&quot;top finger.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;bf_peak_time&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bf_peak_time&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time to the first peak of speed amplitude of the &quot;</span>
            <span class="s2">&quot;bottom finger.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;tf_n_peaks&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tf_n_peaks&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of peak speed for the top finger.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;bf_n_peaks&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bf_n_peaks&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of peak speed for the bottom finger.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">RawDataValueDefinition</span><span class="p">(</span>
            <span class="s2">&quot;peak_asynchro&quot;</span><span class="p">,</span>
            <span class="s2">&quot;peak_asynchro&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The difference between timestamp the top finger &quot;</span>
            <span class="s2">&quot;reach its first peak speed and the timestamp the &quot;</span>
            <span class="s2">&quot;bottom finger reach its first peak speed.&quot;</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>

<div class="viewcode-block" id="TransformTimeToPeak.get_time_to_peak">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.TransformTimeToPeak.get_time_to_peak">[docs]</a>
    <span class="nd">@transformation</span>
    <span class="k">def</span> <span class="nf">get_time_to_peak</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a data set of time to peak.&quot;&quot;&quot;</span>
        <span class="c1"># Add number of peaks</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="n">columns</span><span class="o">=</span><span class="p">[</span>
                    <span class="s2">&quot;bf_n_peaks&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bf_peak_time&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tf_n_peaks&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tf_peak_time&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;peak_asynchro&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;bf_n_peaks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">bf_peaks_index</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;tf_n_peaks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">tf_peaks_index</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">bf_n_peaks</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">tf_n_peaks</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Select timestamp of the first peak speed for the bottom finger</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;bf_peak_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;bf_1_peak_ts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;bf_1_peak_ts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;bf_peaks_index&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Compute time to first peak for the bottom finger</span>
        <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;bf_peak_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;bf_1_peak_ts&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;bf_start&quot;</span><span class="p">]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

        <span class="c1"># Select timestamp of the first peak speed for the top finger</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;tf_peak_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;tf_1_peak_ts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;tf_1_peak_ts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;tf_peaks_index&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Compute time to first peak speed for the top finger</span>
        <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;tf_peak_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;tf_1_peak_ts&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;tf_start&quot;</span><span class="p">]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

        <span class="c1"># Compute asynchronicity</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;peak_asynchro&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">res</span><span class="p">[</span><span class="s2">&quot;tf_1_peak_ts&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;bf_1_peak_ts&quot;</span><span class="p">]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span>

        <span class="k">return</span> <span class="n">res</span><span class="p">[</span>
            <span class="p">[</span>
                <span class="s2">&quot;bf_n_peaks&quot;</span><span class="p">,</span>
                <span class="s2">&quot;bf_peak_time&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tf_n_peaks&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tf_peak_time&quot;</span><span class="p">,</span>
                <span class="s2">&quot;peak_asynchro&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">]</span></div>
</div>



<div class="viewcode-block" id="ExtractTimeToPeakSpeedFinger">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractTimeToPeakSpeedFinger">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractTimeToPeakSpeedFinger</span><span class="p">(</span><span class="n">HandModalityFilterMixin</span><span class="p">,</span> <span class="n">AggregateRawDataSetColumn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate single time to peak processing step.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ExtractTimeToPeakSpeedFinger.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractTimeToPeakSpeedFinger.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span> <span class="n">finger</span><span class="p">:</span> <span class="n">FingerModality</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger</span> <span class="o">=</span> <span class="n">finger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">column_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">finger</span><span class="o">.</span><span class="n">abbr</span><span class="si">}</span><span class="s2">_peak_time&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">)</span></div>


    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;time-to-peak-speed&quot;</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">DEFAULT_AGGREGATIONS_Q95_CV</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;peak_time&quot;</span><span class="p">,</span> <span class="s2">&quot;peaktime&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> time to the first peak of speed &quot;</span>
        <span class="s2">&quot;of the </span><span class="si">{hand}</span><span class="s2"> hand for the </span><span class="si">{finger}</span><span class="s2"> finger for &quot;</span>
        <span class="s2">&quot;successful attempts.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<div class="viewcode-block" id="ExtractTimeToPeakSpeedFinger.get_level_filter">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractTimeToPeakSpeedFinger.get_level_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LevelFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get level filter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">LevelIdFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ExtractTimeToPeakAsynchronicity">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractTimeToPeakAsynchronicity">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractTimeToPeakAsynchronicity</span><span class="p">(</span>
    <span class="n">HandModalityFilterMixin</span><span class="p">,</span> <span class="n">AggregateRawDataSetColumn</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate time to peak asynchronicity.&quot;&quot;&quot;</span>

    <span class="n">column_id</span> <span class="o">=</span> <span class="s2">&quot;peak_asynchro&quot;</span>
    <span class="n">data_set_ids</span> <span class="o">=</span> <span class="s2">&quot;time-to-peak-speed&quot;</span>
    <span class="n">aggregations</span> <span class="o">=</span> <span class="n">DEFAULT_AGGREGATIONS_Q95_CV</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">MeasureValueDefinitionPrototype</span><span class="p">(</span>
        <span class="n">measure_name</span><span class="o">=</span><span class="n">AV</span><span class="p">(</span><span class="s2">&quot;peak speed asynchronicity&quot;</span><span class="p">,</span> <span class="s2">&quot;peak_speed_async&quot;</span><span class="p">),</span>
        <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;float64&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The </span><span class="si">{aggregation}</span><span class="s2"> duration between the bottom finger &quot;</span>
        <span class="s2">&quot;first peak speed and the top finger first peak speed for &quot;</span>
        <span class="s2">&quot;successful pinches attempts of the </span><span class="si">{hand}</span><span class="s2"> hand.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<div class="viewcode-block" id="ExtractTimeToPeakAsynchronicity.get_level_filter">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractTimeToPeakAsynchronicity.get_level_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_level_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LevelFilter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get level filter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">LevelIdFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchTimeToPeakByHand">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchTimeToPeakByHand">[docs]</a>
<span class="k">class</span> <span class="nc">PinchTimeToPeakByHand</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch steps for time to peak speed computation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchTimeToPeakByHand.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchTimeToPeakByHand.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformAttemptPeakSpeed</span><span class="p">(</span><span class="n">level_filter</span><span class="o">=</span><span class="n">LevelIdFilter</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">)),</span>
            <span class="n">TransformTimeToPeak</span><span class="p">(</span>
                <span class="n">level_filter</span><span class="o">=</span><span class="n">LevelIdFilter</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">variable</span><span class="p">),</span>
            <span class="p">),</span>
            <span class="n">ExtractTimeToPeakAsynchronicity</span><span class="p">(</span><span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="c1"># pylint: disable=no-member</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">SUCCESS</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>

        <span class="c1"># pylint: enable=no-member</span>


<div class="viewcode-block" id="ExtractPinchTimeToPeakByHandFinger">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPinchTimeToPeakByHandFinger">[docs]</a>
<span class="k">class</span> <span class="nc">ExtractPinchTimeToPeakByHandFinger</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch extract steps for time to peak speed computation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    finger</span>
<span class="sd">        Pinching fingers modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ExtractPinchTimeToPeakByHandFinger.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.ExtractPinchTimeToPeakByHandFinger.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span> <span class="n">finger</span><span class="p">:</span> <span class="n">FingerModality</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span><span class="n">ExtractTimeToPeakSpeedFinger</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">finger</span><span class="p">)]</span>
        <span class="n">outcome</span> <span class="o">=</span> <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">SUCCESS</span>

        <span class="c1"># pylint: disable=no-member</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">finger</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span>
            <span class="n">finger</span><span class="o">=</span><span class="n">finger</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>

        <span class="c1"># pylint: enable=no-member</span>


<div class="viewcode-block" id="PinchProcessingHandSizeSuccess">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeSuccess">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingHandSizeSuccess</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps by bubbles, hands and success.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    size</span>
<span class="sd">        Bubble size modality.</span>
<span class="sd">    outcome</span>
<span class="sd">        Pinching attempt success modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingHandSizeSuccess.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeSuccess.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span>
        <span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span><span class="p">,</span>
        <span class="n">outcome</span><span class="p">:</span> <span class="n">AttemptOutcomeModality</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformSuccessDeformingDuration</span><span class="p">(</span><span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformPinchingDuration</span><span class="p">(</span><span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractSuccessDeformingDuration</span><span class="p">(</span><span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractPinchingDuration</span><span class="p">(</span><span class="n">outcome</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">,</span>
            <span class="n">outcome</span><span class="o">=</span><span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">HandModalityFilter</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">BubbleSizeModalityFilter</span><span class="p">(</span><span class="n">size</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingHandSizeFingerSuccess">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeFingerSuccess">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingHandSizeFingerSuccess</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch processing steps by bubbles, hands, finger and success.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    size</span>
<span class="sd">        Bubble size modality.</span>
<span class="sd">    outcome</span>
<span class="sd">        Pinching attempt success modality.</span>
<span class="sd">    finger</span>
<span class="sd">        Pinching fingers modality.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingHandSizeFingerSuccess.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingHandSizeFingerSuccess.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">,</span>
        <span class="n">size</span><span class="p">:</span> <span class="n">BubbleSizeModality</span><span class="p">,</span>
        <span class="n">outcome</span><span class="p">:</span> <span class="n">AttemptOutcomeModality</span><span class="p">,</span>
        <span class="n">finger</span><span class="p">:</span> <span class="n">FingerModality</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformFirstPushes</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformContactDistance</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformPressures</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformSpeed</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformMeanSquaredJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">TransformMeanSquaredPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractContactDistance</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractFirstPushes</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractPressures</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractSpeed</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractMeanSquaredJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
            <span class="n">ExtractMeanSquaredPressureJerk</span><span class="p">(</span><span class="n">finger</span><span class="p">,</span> <span class="n">outcome</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">steps</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">,</span>
            <span class="n">modalities</span><span class="o">=</span><span class="p">[</span><span class="n">hand</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">size</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">finger</span><span class="o">.</span><span class="n">av</span><span class="p">,</span> <span class="n">outcome</span><span class="o">.</span><span class="n">av</span><span class="p">],</span>
            <span class="n">hand</span><span class="o">=</span><span class="n">hand</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
            <span class="n">outcome</span><span class="o">=</span><span class="n">outcome</span><span class="p">,</span>
            <span class="n">finger</span><span class="o">=</span><span class="n">finger</span><span class="p">,</span>
            <span class="n">level_filter</span><span class="o">=</span><span class="n">HandModalityFilter</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">BubbleSizeModalityFilter</span><span class="p">(</span><span class="n">size</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingAggregate">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingAggregate">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingAggregate</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of pinch aggregating steps on hands.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    hand</span>
<span class="sd">        Handedness for tasks that are applied to different hands.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingAggregate.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingAggregate.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand</span><span class="p">:</span> <span class="n">HandModality</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">AggregateSuccessfulPinchesByHand</span><span class="p">(</span><span class="n">hand</span><span class="p">),</span>
            <span class="n">AggregatePinchAccuracyByHand</span><span class="p">(</span><span class="n">hand</span><span class="p">),</span>
            <span class="n">AggregateTotalPinchAttemptsByHand</span><span class="p">(</span><span class="n">hand</span><span class="p">),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">AggregateDoubleTouchAsynchronyByHand</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">attempt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="n">AttemptSelectionModality</span>
            <span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchFlag">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchFlag">[docs]</a>
<span class="k">class</span> <span class="nc">PinchFlag</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Processing group for all drawing flag.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchFlag.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchFlag.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransformUserAcceleration</span><span class="p">(),</span>
            <span class="n">UpperLimbOrientationFlagger</span><span class="p">(),</span>
            <span class="n">OnlyOneHandPerformed</span><span class="p">(</span><span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PinchProcessingStepGroup">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingStepGroup">[docs]</a>
<span class="k">class</span> <span class="nc">PinchProcessingStepGroup</span><span class="p">(</span><span class="n">ProcessingStepGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A group of all pinch processing steps for measures extraction.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="PinchProcessingStepGroup.__init__">
<a class="viewcode-back" href="../../../../../../api/dispel.providers.generic.tasks.pinch.steps.html#dispel.providers.generic.tasks.pinch.steps.PinchProcessingStepGroup.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">PinchFlag</span><span class="p">(),</span>
            <span class="o">*</span><span class="p">(</span><span class="n">PinchProcessingLevel</span><span class="p">(</span><span class="n">level_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">level_id</span> <span class="ow">in</span> <span class="n">_LEVELS</span><span class="p">),</span>
            <span class="n">PinchConcatenateTargetsLevels</span><span class="p">(),</span>
            <span class="o">*</span><span class="p">(</span><span class="n">PinchConcatenateHandsGroup</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span><span class="p">),</span>
            <span class="o">*</span><span class="p">(</span><span class="n">PinchReactionTimeByHand</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span><span class="p">),</span>
            <span class="o">*</span><span class="p">(</span><span class="n">Pinch1ShotDurationByHand</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span><span class="p">),</span>
            <span class="o">*</span><span class="p">(</span><span class="n">PinchTimeToPeakByHand</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span><span class="p">),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">ExtractPinchTimeToPeakByHandFinger</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">finger</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
                <span class="k">for</span> <span class="n">finger</span> <span class="ow">in</span> <span class="n">FingerModality</span>
            <span class="p">),</span>
            <span class="o">*</span><span class="p">(</span><span class="n">PinchProcessingSize</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span><span class="p">),</span>
            <span class="n">TransformReactionTime</span><span class="p">(</span><span class="n">level_filter</span><span class="o">=</span><span class="n">LevelIdFilter</span><span class="p">(</span><span class="s2">&quot;melted_levels&quot;</span><span class="p">)),</span>
            <span class="n">ExtractReactionTime</span><span class="p">(),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">PinchProcessingHandSensor</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">sensor</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
                <span class="k">for</span> <span class="n">sensor</span> <span class="ow">in</span> <span class="p">[</span><span class="n">SensorModality</span><span class="o">.</span><span class="n">ACCELEROMETER</span><span class="p">,</span> <span class="n">SensorModality</span><span class="o">.</span><span class="n">GYROSCOPE</span><span class="p">]</span>
            <span class="p">),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">PinchProcessingHandSize</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
                <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span>
            <span class="p">),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">PinchProcessingHandSizeAttempt</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">attempt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
                <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span>
                <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="n">AttemptSelectionModality</span>
            <span class="p">),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">PinchProcessingHandSizeFinger</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">finger</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
                <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span>
                <span class="k">for</span> <span class="n">finger</span> <span class="ow">in</span> <span class="n">FingerModality</span>
            <span class="p">),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">PinchProcessingHandSizeSuccess</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">outcome</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
                <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span>
                <span class="k">for</span> <span class="n">outcome</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">,</span>
                    <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">FAILURE</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">),</span>
            <span class="o">*</span><span class="p">(</span>
                <span class="n">PinchProcessingHandSizeFingerSuccess</span><span class="p">(</span><span class="n">hand</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">outcome</span><span class="p">,</span> <span class="n">finger</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span>
                <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">BubbleSizeModality</span>
                <span class="k">for</span> <span class="n">outcome</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">,</span>
                    <span class="n">AttemptOutcomeModality</span><span class="o">.</span><span class="n">FAILURE</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="k">for</span> <span class="n">finger</span> <span class="ow">in</span> <span class="n">FingerModality</span>
            <span class="p">),</span>
            <span class="o">*</span><span class="p">(</span><span class="n">PinchProcessingAggregate</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span> <span class="k">for</span> <span class="n">hand</span> <span class="ow">in</span> <span class="n">HandModality</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="n">TASK_NAME</span><span class="p">)</span></div>
</div>



<span class="n">STEPS</span> <span class="o">=</span> <span class="p">[</span><span class="n">PinchProcessingStepGroup</span><span class="p">()]</span>
</pre></div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../../../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>